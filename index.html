<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            display: flex;
            justify-content: space-between;
            padding: 0 10px;
        }
        table {
            border-collapse: collapse;
        }
        table tr > * {
            border: 1px solid black;
        }
        td > input {
            border: 0;
        }
        input[type="number"].short {
            width: 3em;
        }
        input:not([type]).short, input[type="text"].short, input[type="number"].long {
            width: 5em;
        }
        dialog > input[type="number"] {
            width: 5em;
        }
        .hidden {
            display: none;
        }
        .grid {
            display: flex;
            flex-direction: column;
            max-width: fit-content; 
            align-items: end;
        }
    </style>
    <script src="./template.js"></script>
    <script src="./export.js"></script>
</head>
<body>
    <div style="width: 1000px; height: 800px; overflow: scroll;" id="mainContainer">
        <canvas id="main" width="2000" height="2000"></canvas>
    </div>
    <div>
        <strong>Fake table_seating</strong>
        <br>
        <br>
        <button id="tableSeatingAdd">Add Row</button>
        <br>
        <button id="tableSeatingAdd10">Add 10 Rows</button>
        <br>
        <button id="tableSeatingAddTogo">Add 20 Togo Rows</button>
        <br>
        <button id="tableSeatingRemove">Remove Last Row</button>
        <br>
        <button id="tableSeatingRemove10">Remove Last 10 Rows</button>
        <br>
        <br>
        <div style="max-height: 640px; overflow-y: scroll;">
            <table id="tableSeating">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Togo</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
    <div>
        <strong>Set width/height</strong>
        <dl id="setDimensions">
            <dt>Tables</dt>
            <dd>
                <label>Width: <input id="setTableWidth" type="number" class="long" value="100" data-type="table" data-dimension="width"></label>
            </dd>
            <dd>
                <label>Height: <input id="setTableHeight" type="number" class="long" value="60" data-type="table" data-dimension="height"></label>
            </dd>
            <dt>Counter</dt>
            <dd>
                <label>Width: <input id="setCounterWidth" type="number" class="long" value="90" data-type="counter" data-dimension="width"></label>
            </dd>
            <dd>
                <label>Height: <input id="setCounterHeight" type="number" class="long" value="50" data-type="counter" data-dimension="height"></label>
            </dd>
            <dt>Bar</dt>
            <dd>
                <label>Width: <input id="setBarWidth" type="number" class="long" value="90" data-type="bar" data-dimension="width"></label>
            </dd>
            <dd>
                <label>Height: <input id="setBarHeight" type="number" class="long" value="53" data-type="bar" data-dimension="height"></label>
            </dd>
            <dt>To go</dt>
            <dd>
                <label>Width: <input id="setTogoWidth" type="number" class="long" value="90" data-type="togo" data-dimension="width"></label>
            </dd>
            <dd>
                <label>Height: <input id="setTogoHeight" type="number" class="long" value="50" data-type="togo" data-dimension="height"></label>
            </dd>
        </dl>
        <hr>
        <p><strong>Download/Export</strong></p>
        <label>Store Code: <input id="storeCode" value="test" class="short"></label>
        <br>
        <button id="readyDownloads" onclick="readyDownloads()">Generate Files</button>
        <br>
        <p><a id="downloadJava">TablePanelImplKulaTEST.java</a></p>
        <p><a id="downloadSQL">table_seating_TEST.sql</a></p>
        <p><a id="downloadConflictSQL">table_seating_conflict.sql</a></p>
    </div>
    <div style="max-width: 20%;">
        <strong>Usage</strong>
        <p>Click and drag on an element to move it around. Hold <kbd>Shift</kbd> to disable collision.</p>
        <p>While clicking on an element, press <kbd>WASD</kbd> to move one pixel in the given direction.</p>
        <dl>
            <dt>Double click on an empty area of the grid to create a new element.</dt>
            <dd>A Panel is a line of tables.</dd>
            <dd>A Lane is a rectangle with text.</dd>
            <dd>A Group is a set of Panels put together.</dd>
            <dd>Togo is for the togo tables.</dd>
            <br>
            <dt>Double click on an element to edit parts of it.</dt>
            <dd>Seat count and seat type cannot be edited so you will need to delete and recreate the element.</dd>
            <br>
            <dt>Use the table to the left to emulate <strong>table_seating</strong>.</dt>
            <dd>Change which names/IDs are used in a Panel or Group by double-clicking on them.</dd>
        </dl>
    </div>

    <dialog id="dialog" data-id="-1" data-x="0" data-y="0">
        <label>Select what to add: <select id="dCreateType">
            <option value="panel">Panel</option>
            <option value="lane">Lane</option>
            <option value="group">Group</option>
            <option value="togo">Togo</option>
        </select><br></label>

        <label>Seat type: <select id="dSeatType">
            <option value="table">Table</option>
            <option value="counter">Counter</option>
            <option value="bar">Bar</option>
            <option value="togo">Togo</option>
        </select><br></label>

        <label>Enter text: <input id="dText"><br></label>

        <label>Orientation: <select id="dOrientation">
            <option value="vertical">Vertical</option>
            <option value="horizontal">Horizontal</option>
        </select><br></label>

        <label># Seats: <input id="dSeatNum" type="number" class="short" min="1" value="4"><br></label>

        <label>Tables per row: <input id="dTogoRow" type="number" class="short" min="1" value="5"><br></label>

        <label>Indentation: <select id="dIndent">
            <option value="left">Left</option>
            <option value="right">Right</option>
        </select><br></label>

        <label>Set width: <input id="dWidth" type="number" class="long" min="10"><br></label>
        <div id="dWidthMatch"></div>
        <label>Set height:<input id="dHeight" type="number" class="long" min="10"><br></label>
        <div id="dHeightMatch"></div>

        <div id="dMargins">
            <span>Set margins</span>
            <br>
            <div class="grid">
                <label>Top: <input id="dMarginTop" type="number" class="short" min="0" value="3"><br></label>
                <label>Bottom: <input id="dMarginBottom" type="number" class="short" min="0" value="3"><br></label>
                <label>Left: <input id="dMarginLeft" type="number" class="short" min="0" value="3"><br></label>
                <label>Right: <input id="dMarginRight" type="number" class="short" min="0" value="3"><br></label>
            </div>
        </div>

        <div id="dSeating">
            <span>Set table_seating IDs</span>
            <br>
            <label>Start: <input id="dSeatingStart" type="number" class="short" min="1"></label>
            <label>End: <input id="dSeatingEnd" type="number" class="short" min="1"></label>
            <br>
            <span>New table names:</span>
            <ul id="dSeatingList"></ul>
        </div>

        <div id="dGroup">
            <label>Number of panels/columns: <select id="dGroupPanels">
                <option value="1">1</option>
                <option value="2" selected>2</option>
            </select></label>
            <br>
            <label>Panel 1 Seat Count: <input id="dGroupPanel1" type="number" class="short" min="1" value="4"><br></label>
            <label>Panel 2 Seat Count: <input id="dGroupPanel2" type="number" class="short" min="1" value="4"><br></label>
        </div>

        <button id="dialogConfirm">Confirm</button>
        <button id="dialogCancel">Cancel</button>
        <button id="dialogDelete">Delete</button>
    </dialog>

    <script src="./rectangle.js"></script>
    <script src="./draw.js"></script>
    <script src="./drag.js"></script>
    <script src="./table.js"></script>
    <script src="./dialog.js"></script>
</body>
</html>